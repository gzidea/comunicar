<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">
    
        <title>Yizi Freelancer - Comunicar</title>
    
        <!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
        <link href="css/bootstrap.css" rel="stylesheet">
        <!-- Custom CSS -->
        <link href="css/freelancer.css" rel="stylesheet">
    
        <!-- Custom Fonts -->
        <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <!-- FONT AWESOME -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous">
    
        <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
        <link href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    
        <!--<link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection" />-->
        <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!--<link href="css/prism.css" rel="stylesheet" />-->
        
        <link href="css/registros.fb.css" rel="stylesheet">
    </head>
<body id="page-top" class="index">
    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#page-top">Comunicar</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li class="page-scroll">
                        <a href="#" id="show-noticias">Noticias</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#" id="show-cumplemes">Cumpleaños del mes</a>
                    </li>
                    <li class="page-scroll">
                        <a href="#contact">Quienes somos</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <header>
        <div class="container">

        </div>
    </header>

    <!-- Contact Section -->
    <section id="contact">
        <div id="element-noticias" class="container" style="display: none;">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Noticias</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2"> 
                    <div class="row control-group">
                        <div class="form-group col-xs-12 floating-label-form-group controls">
                            <ul Id="list" class="gfzfilas"> 
                            
                            </ul>   
                            <p class="help-block text-danger"></p>
                        </div>
                    </div>                    
                </div>
            </div>
        </div>
    </section>

    <!-- cumpleaños Section -->
    <section id="contact">
        <div id="element-cumplemes" class="container" style="display: none;">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Cumpleaños del mes actual</h2>
                    <hr class="star-primary">
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2">
                    <!-- To configure the contact form email address, go to mail/contact_me.php and update the email address in the PHP file on line 19. -->
                    <!-- The form should work on most web servers, but if the form is not working you may need to configure your web server differently. -->
                    <form name="sentMessage" id="contactForm" novalidate>
                        <div class="row control-group">
                            <div class="form-group col-xs-12 floating-label-form-group controls">
                                <label>Name</label>
                                <input type="text" class="form-control" placeholder="Name" id="name" required data-validation-required-message="Please enter your name.">
                                <p class="help-block text-danger"></p>
                            </div>
                        </div>
                        <div class="row control-group">
                            <div class="form-group col-xs-12 floating-label-form-group controls">
                                <label>Email Address</label>
                                <input type="email" class="form-control" placeholder="Email Address" id="email" required data-validation-required-message="Please enter your email address.">
                                <p class="help-block text-danger"></p>
                            </div>
                        </div>
    
                        <div id="success"></div>
                        <div class="row">
                            <div class="form-group col-xs-12">
                                <button type="submit" class="btn btn-success btn-lg">Send</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="text-center navbar-fixed-bottom">
        <div class="footer-above" style="display: none;">
            <div class="container">
                <div class="row">
                    <div class="footer-col col-md-4">
                        <h3>+54 9 3482-687526</h3>
                        <p>Reconquista - Santa Fe<br>Argentina</p>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3>Around the Web</h3>
                        <ul class="list-inline">
                            <li>
                                <a href="#" class="btn-social btn-outline"><i class="fa fa-fw fa-facebook"></i></a>
                            </li>
                            <li>
                                <a href="#" class="btn-social btn-outline"><i class="fa fa-fw fa-google-plus"></i></a>
                            </li>
                            <li>
                                <a href="#" class="btn-social btn-outline"><i class="fa fa-fw fa-twitter"></i></a>
                            </li>
                            <li>
                                <a href="#" class="btn-social btn-outline"><i class="fa fa-fw fa-linkedin"></i></a>
                            </li>
                            <li>
                                <a href="#" class="btn-social btn-outline"><i class="fa fa-fw fa-dribbble"></i></a>
                            </li>
                        </ul>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3>About Freelancer</h3>
                        <p>Freelance is a free to use, open source Bootstrap theme created by <a href="http://startbootstrap.com">Start Bootstrap</a>.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        Copyright &copy; Gustavo Zbinden 2020
                    </div>
                </div>
            </div>
        </div>
    </footer>


    <!-- Script que controla el editor enriquecido -->
    <script type="text/javascript" src="js/jquery-1.12.0.js"></script>
    <script type="text/javascript" src="js/editor.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> 
	<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/editor.css">

    <!--------------------------FIRBASE LIBRARIES-------------------------------------------------->
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-database.js"></script> 
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-storage.js"></script> 
    <script type="text/javascript" src="js/firebase.js"></script>

    <script src="js/materialize.js"></script>


    <script id="MainScript">




        $(document).ready(function() {
            
            $('#txt-content').Editor();

            $("#hide").on('click', function() {
                $("#element-noticias").hide();
                return false;
            });
 
            $("#show-noticias").on('click', function() {
                $("#element-noticias").show();
                $("#element-cumplemes").hide();
                return false;
            });

            $("#show-cumplemes").on('click', function() {
                $("#element-noticias").hide();
                $("#element-cumplemes").show();
                return false;
            });
        });
        //Inicio la configuracion de FIREBASE en la clase js/firebase.js
        iniciarFB();
        //--------------------------------------------------------------
        
/*
1                           <div class="row control-group gfzfixed-action-btn">
2                               <div >
3                                   <div class="navbar-header page-scroll">
                                        <a class="navbar-brand" href="#page-top"><i class="far fa-newspaper">  Titulo de la noticias dd</i></a>
                                    </div>
                                    <ul>
                                        <li>
                                            <a class="gfzbtn-floating red" href="#" id="show-noticias">
                                                <i class="material-icons">remove_circle_outline</i>
                                            </a>
                                        </li>
                                        <li>
                                            <a class="gfzbtn-floating red" href="#" id="show-cumplemes">
                                                <i class="material-icons">add_circle_outline</i>
                                            </a>
                                        </li>
                                    </ul>                            
                                </div>
                            </div>

*/

        function addNoticiasToList(titulo, fecha, id) {

            var ul = document.getElementById('list');                      //Busco el elemento principal donde se crearan el resto de los controles

            var _titulo_li = document.createElement('li');                 //Creo el row de la lista

            var _titulo_div1 = document.createElement('div')
            _titulo_div1.setAttribute('class', 'row control-group gfzfixed-action-btn');

            var _titulo_div2 = document.createElement('div')

            var _titulo_div3 = document.createElement('div')
            _titulo_div3.setAttribute('class', 'navbar-header page-scroll');
            
            var _titulo_a = document.createElement('a');                   
            _titulo_a.setAttribute('class', 'navbar-brand'); 
            _titulo_a.setAttribute('href', '#page-top')  
            
            var _titulo_i = document.createElement('i');                   
            _titulo_i.setAttribute('class', 'far fa-newspaper'); 
            _titulo_i.innerHTML = ' '+titulo+' ('+fecha+')';                   

            var _editar_ul = document.createElement('ul');
            //_editar_ul.setAttribute('class', 'nav navbar-nav navbar-right');
           
            var _editar_li1 = document.createElement('li')
            //_editar_li1.setAttribute('class', 'page-scroll');

            var _editar_a1 = document.createElement('a')
            _editar_a1.setAttribute('class', 'gfzbtn-floating red');
            _editar_a1.setAttribute('href', '#')
            _editar_a1.setAttribute('style', 'opacity: 0; transform: scale(0.4) translateY(0px) translateX(40px);')
            _editar_a1.setAttribute('id', 'show-noticias');

            var _icono_edit = document.createElement('i');
            _icono_edit.setAttribute('class', 'material-icons'); 
            _icono_edit.innerText = 'add_circle_outline'; 

            var _editar_li2 = document.createElement('li')
            //_editar_li2.setAttribute('class', 'page-scroll');

            var _editar_a2 = document.createElement('a')
            _editar_a2.setAttribute('class', 'gfzbtn-floating red');
            _editar_a2.setAttribute('href', 'javascript:borrarNoticia(' + id + ');')
            _editar_a2.setAttribute('style', 'opacity: 0; transform: scale(0.4) translateY(0px) translateX(40px);')
            _editar_a2.setAttribute('id', 'show-noticias');

            var _icono_del = document.createElement('i');
            _icono_del.setAttribute('class', 'material-icons');
            _icono_del.innerHTML = 'remove_circle_outline'; 


            ul.appendChild(_titulo_li);
            _titulo_li.appendChild( _titulo_div1);
            _titulo_div1.appendChild(_titulo_div2);
            _titulo_div2.appendChild(_titulo_div3);
            _titulo_div3.appendChild(_titulo_a);
            _titulo_a.appendChild(_titulo_i);

            _titulo_div2.appendChild(_editar_ul);
            _editar_ul.appendChild(_editar_li1);
            _editar_li1.appendChild(_editar_a1);
            _editar_a1.appendChild(_icono_edit);

            _editar_ul.appendChild(_editar_li2);
            _editar_li2.appendChild(_editar_a2);
            _editar_a2.appendChild(_icono_del);

            var instances = M.FloatingActionButton.init(_titulo_div1, {
                direction: 'left'
            });
        };

        function fetchAllNoticias() {
            firebase.database().ref('PictureNew').once('value', function(snapshot) {
                snapshot.forEach(
                    function(ChildSnapshot) {
                        let fecha = ChildSnapshot.val().fecha 
                        let id = ChildSnapshot.val().id 
                        let mensaje = ChildSnapshot.val().mensaje 
                        let titulo = ChildSnapshot.val().titulo 
                        let utlimagen = ChildSnapshot.val().utlimagen  
                        addNoticiasToList(titulo,fecha, id);
                    }
                )
            });
        };

        function borrarNoticia(id) {
            try {
                firebase.database().ref('PictureNew/'+id).remove();
                console.log('Noticia: '+id);
            } catch (error) {
                console.log('Error: '+error);
            }
        };
        fetchAllNoticias();

        //esto tengo que habilitar si necesito el menu en otro lado que no sea la grilla.
        /*document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('.gfzfixed-action-btn');
            var instances = M.FloatingActionButton.init(elems, {
            direction: 'left'
            });
        });*/
        //window.onload(fetchAllNoticias());
    </script>
</body>
</html>